@page "/conectar"
@using fisioClin.Models
@using System.ComponentModel.DataAnnotations   
@using FisioClin.Configs
@inject NavigationManager Navigation
@inject Conexao conexao

@rendermode InteractiveServer
<div class="login-container">
    <div class="left-side">
        <div class="logo-circle fancy-logo">FC</div>
        <div class="brand-name">FISIOCLIN</div>
        <div class="subtitle">FISIOTERAPIA</div>
    </div>

    <div class="right-side">
        <EditForm Model="@usuario" OnValidSubmit="@LoginUsuario">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <h2>LOGIN</h2>

            <label for="email">Email</label>
            <InputText id="email" @bind-Value="usuario.Email" class="form-control" />

            <label for="senha">Senha</label>
            <InputText id="senha" type="password" @bind-Value="usuario.Senha" class="form-control" />

            @if (!string.IsNullOrEmpty(mensagem))
            {
                <div class="alert alert-danger mt-2">@mensagem</div>
            }

            <div class="btn-group mt-3">
                <button type="reset" class="btn cancel-btn">Cancelar</button>
                <button type="submit" class="btn confirm-btn">Confirmar</button>
            </div>
        </EditForm>
    </div>
</div>

@code {
    private UsuarioLogin usuario = new();
    private string mensagem = "";

    private void LoginUsuario()
    {
        try
        {
            var loginDao = new Object();

            // verifica em paciente e funcionário
           

          
        }
        catch (Exception ex)
        {
            mensagem = $"Erro ao conectar: {ex.Message}";
        }
    }

    public class UsuarioLogin
    {
        [Required(ErrorMessage = "Email é obrigatório.")]
        public string Email { get; set; } = "";

        [Required(ErrorMessage = "Senha é obrigatória.")]
        public string Senha { get; set; } = "";
    }
}
